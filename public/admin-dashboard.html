<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - iNest</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background-color: #f5f7fa;
            overflow-x: hidden;
        }

        .sidebar {
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, #003366, #004080);
            position: fixed;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
        }

        .sidebar.collapsed {
            width: 70px;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }

        .sidebar-header img {
            height: 40px;
            margin-bottom: 10px;
        }

        .sidebar-header h3 {
            color: #fff;
            font-size: 18px;
            font-weight: 600;
            transition: opacity 0.3s;
        }

        .sidebar.collapsed .sidebar-header h3 {
            opacity: 0;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: #e8f2ff;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
        }

        .menu-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-left-color: #FFD700;
        }

        .menu-item.active {
            background-color: rgba(255, 215, 0, 0.2);
            border-left-color: #FFD700;
            color: #FFD700;
        }

        .menu-item i {
            font-size: 18px;
            margin-right: 15px;
            width: 20px;
            text-align: center;
        }

        .menu-item span {
            font-size: 14px;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        .sidebar.collapsed .menu-item span {
            opacity: 0;
        }

        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .main-content.expanded {
            margin-left: 70px;
        }

        .top-bar {
            background: #fff;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 999;
        }

        .top-bar-left {
            display: flex;
            align-items: center;
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 20px;
            color: #333;
            cursor: pointer;
            margin-right: 20px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }

        .top-bar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .notification-icon {
            position: relative;
            color: #666;
            font-size: 18px;
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4757;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        .user-profile:hover {
            background-color: #f8f9fa;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .content-area {
            padding: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .stat-icon.users { background: linear-gradient(135deg, #667eea, #764ba2); }
        .stat-icon.listings { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .stat-icon.orders { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .stat-icon.revenue { background: linear-gradient(135deg, #43e97b, #38f9d7); }

        .stat-info h3 {
            font-size: 28px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }

        .stat-info p {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        .stat-change {
            font-size: 12px;
            font-weight: 600;
            margin-top: 5px;
        }

        .stat-change.positive { color: #27ae60; }
        .stat-change.negative { color: #e74c3c; }

        .dashboard-section {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .dashboard-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .card-header {
            padding: 20px 25px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }

        .card-body {
            padding: 25px;
        }

        .table-responsive {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th {
            padding: 12px 15px;
            background-color: #f8f9fa;
            color: #495057;
            font-weight: 600;
            text-align: left;
            border-bottom: 2px solid #dee2e6;
        }

        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #dee2e6;
            color: #333;
        }

        .data-table tr:hover {
            background-color: #f8f9fa;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active { background-color: #d4edda; color: #155724; }
        .status-pending { background-color: #fff3cd; color: #856404; }
        .status-blocked { background-color: #f8d7da; color: #721c24; }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
        }

        .btn-success {
            background-color: #28a745;
            color: white;
        }

        .btn-danger {
            background-color: #dc3545;
            color: white;
        }

        .btn-warning {
            background-color: #ffc107;
            color: #333;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: #007bff;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            height: 400px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-body {
            padding: 25px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
        }

        .search-filter-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
        }

        .filter-select {
            min-width: 150px;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                width: 280px;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .main-content.expanded {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .search-filter-bar {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <img src="./images/logo.png" alt="iNest Logo">
            <h3>Admin Panel</h3>
        </div>
        
        <nav class="sidebar-menu">
            <a href="#" class="menu-item active" data-section="overview">
                <i class="fas fa-chart-line"></i>
                <span>Overview</span>
            </a>
            <a href="#" class="menu-item" data-section="users">
                <i class="fas fa-users"></i>
                <span>User Management</span>
            </a>
            <a href="#" class="menu-item" data-section="listings">
                <i class="fas fa-home"></i>
                <span>Listings</span>
            </a>
            <a href="#" class="menu-item" data-section="orders">
                <i class="fas fa-shopping-cart"></i>
                <span>Orders</span>
            </a>
            <a href="#" class="menu-item" data-section="reports">
                <i class="fas fa-flag"></i>
                <span>Reports</span>
            </a>
            <a href="#" class="menu-item" data-section="analytics">
                <i class="fas fa-chart-bar"></i>
                <span>Analytics</span>
            </a>
            <a href="#" class="menu-item" data-section="notifications">
                <i class="fas fa-bell"></i>
                <span>Notifications</span>
            </a>
            <a href="#" class="menu-item" data-section="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </a>
            <a href="#" class="menu-item" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </a>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-left">
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="page-title" id="pageTitle">Dashboard Overview</h1>
            </div>
            
            <div class="top-bar-right">
                <div class="notification-icon">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">3</span>
                </div>
                
                <div class="user-profile" onclick="showUserMenu()">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span id="adminName">Admin</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Overview Section -->
            <div id="overview-section" class="dashboard-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon users">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalUsers">2,847</h3>
                            <p>Total Users</p>
                            <div class="stat-change positive">+12% this month</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon listings">
                            <i class="fas fa-home"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalListings">1,234</h3>
                            <p>Active Listings</p>
                            <div class="stat-change positive">+8% this month</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon orders">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalOrders">5,631</h3>
                            <p>Total Orders</p>
                            <div class="stat-change positive">+15% this month</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon revenue">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-info">
                            <h3 id="totalRevenue">₹2,45,690</h3>
                            <p>Total Revenue</p>
                            <div class="stat-change positive">+22% this month</div>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container">
                        <canvas id="userGrowthChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Activities</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Action</th>
                                        <th>User</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recentActivities">
                                    <tr>
                                        <td>2 min ago</td>
                                        <td>New user registration</td>
                                        <td>john.doe@email.com</td>
                                        <td><span class="status-badge status-active">Active</span></td>
                                    </tr>
                                    <tr>
                                        <td>5 min ago</td>
                                        <td>New PG listing created</td>
                                        <td>owner.abc@email.com</td>
                                        <td><span class="status-badge status-pending">Pending</span></td>
                                    </tr>
                                    <tr>
                                        <td>12 min ago</td>
                                        <td>Food order placed</td>
                                        <td>student123@email.com</td>
                                        <td><span class="status-badge status-active">Active</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Section -->
            <div id="users-section" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">User Management</h3>
                        <button class="btn btn-primary" onclick="showAddUserModal()">
                            <i class="fas fa-plus"></i> Add User
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="search-filter-bar">
                            <input type="text" class="form-control search-input" placeholder="Search users..." id="userSearch">
                            <select class="form-control filter-select" id="userRoleFilter">
                                <option value="">All Roles</option>
                                <option value="tenant">Tenant</option>
                                <option value="owner">Owner</option>
                                <option value="service_provider">Service Provider</option>
                                <option value="admin">Admin</option>
                            </select>
                            <select class="form-control filter-select" id="userStatusFilter">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="blocked">Blocked</option>
                                <option value="pending">Pending</option>
                            </select>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Role</th>
                                        <th>Status</th>
                                        <th>Joined</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTable">
                                    <!-- Users will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Listings Section -->
            <div id="listings-section" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Property Listings</h3>
                        <div>
                            <button class="btn btn-success" onclick="bulkVerifyListings()">
                                <i class="fas fa-check"></i> Bulk Verify
                            </button>
                            <button class="btn btn-primary" onclick="exportListings()">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="search-filter-bar">
                            <input type="text" class="form-control search-input" placeholder="Search listings..." id="listingSearch">
                            <select class="form-control filter-select" id="listingCityFilter">
                                <option value="">All Cities</option>
                                <option value="hyderabad">Hyderabad</option>
                                <option value="bangalore">Bangalore</option>
                                <option value="delhi">New Delhi</option>
                            </select>
                            <select class="form-control filter-select" id="listingStatusFilter">
                                <option value="">All Status</option>
                                <option value="verified">Verified</option>
                                <option value="pending">Pending</option>
                                <option value="rejected">Rejected</option>
                            </select>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllListings"></th>
                                        <th>Property</th>
                                        <th>Owner</th>
                                        <th>City</th>
                                        <th>Price</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="listingsTable">
                                    <!-- Listings will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Orders Section -->
            <div id="orders-section" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Order Management</h3>
                        <button class="btn btn-primary" onclick="exportOrders()">
                            <i class="fas fa-download"></i> Export Orders
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="search-filter-bar">
                            <input type="text" class="form-control search-input" placeholder="Search orders..." id="orderSearch">
                            <select class="form-control filter-select" id="orderTypeFilter">
                                <option value="">All Types</option>
                                <option value="food">Food</option>
                                <option value="laundry">Laundry</option>
                            </select>
                            <select class="form-control filter-select" id="orderStatusFilter">
                                <option value="">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="delivered">Delivered</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Customer</th>
                                        <th>Type</th>
                                        <th>Amount</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTable">
                                    <!-- Orders will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports-section" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">User Reports & Complaints</h3>
                        <button class="btn btn-success" onclick="bulkResolveReports()">
                            <i class="fas fa-check"></i> Bulk Resolve
                        </button>
                    </div>
                    <div class="card-body">
                        <div class="search-filter-bar">
                            <input type="text" class="form-control search-input" placeholder="Search reports..." id="reportSearch">
                            <select class="form-control filter-select" id="reportCategoryFilter">
                                <option value="">All Categories</option>
                                <option value="maintenance">Maintenance</option>
                                <option value="safety">Safety</option>
                                <option value="billing">Billing</option>
                                <option value="other">Other</option>
                            </select>
                            <select class="form-control filter-select" id="reportStatusFilter">
                                <option value="">All Status</option>
                                <option value="open">Open</option>
                                <option value="in_progress">In Progress</option>
                                <option value="resolved">Resolved</option>
                            </select>
                        </div>
                        
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllReports"></th>
                                        <th>Report ID</th>
                                        <th>User</th>
                                        <th>Category</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="reportsTable">
                                    <!-- Reports will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Section -->
            <div id="analytics-section" class="dashboard-section">
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>User Registrations</h3>
                        <canvas id="userRegistrationChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Revenue Breakdown</h3>
                        <canvas id="revenueBreakdownChart"></canvas>
                    </div>
                </div>
                
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>City-wise Distribution</h3>
                        <canvas id="cityDistributionChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Service Usage</h3>
                        <canvas id="serviceUsageChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Notifications Section -->
            <div id="notifications-section" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Send Notifications</h3>
                        <button class="btn btn-primary" onclick="showBroadcastModal()">
                            <i class="fas fa-bullhorn"></i> Broadcast Message
                        </button>
                    </div>
                    <div class="card-body">
                        <form id="notificationForm">
                            <div class="form-group">
                                <label class="form-label">Notification Type</label>
                                <select class="form-control" id="notificationType">
                                    <option value="info">Information</option>
                                    <option value="warning">Warning</option>
                                    <option value="alert">Alert</option>
                                    <option value="maintenance">Maintenance</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Target Audience</label>
                                <select class="form-control" id="targetAudience">
                                    <option value="all">All Users</option>
                                    <option value="tenants">Tenants Only</option>
                                    <option value="owners">Property Owners</option>
                                    <option value="service_providers">Service Providers</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Title</label>
                                <input type="text" class="form-control" id="notificationTitle" placeholder="Enter notification title">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Message</label>
                                <textarea class="form-control" id="notificationMessage" rows="4" placeholder="Enter notification message"></textarea>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i> Send Notification
                            </button>
                        </form>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recent Notifications</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Type</th>
                                        <th>Audience</th>
                                        <th>Sent</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="notificationsTable">
                                    <!-- Notifications will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings-section" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">System Settings</h3>
                    </div>
                    <div class="card-body">
                        <form id="settingsForm">
                            <h4>General Settings</h4>
                            <div class="form-group">
                                <label class="form-label">Platform Name</label>
                                <input type="text" class="form-control" value="iNest" id="platformName">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Support Email</label>
                                <input type="email" class="form-control" value="support@inest.com" id="supportEmail">
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Maximum Upload Size (MB)</label>
                                <input type="number" class="form-control" value="10" id="maxUploadSize">
                            </div>
                            
                            <h4>Feature Toggles</h4>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked id="enableRegistrations"> Allow New Registrations
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked id="enableNotifications"> Enable Push Notifications
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" checked id="enablePayments"> Enable Payment Gateway
                                </label>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="addUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New User</h3>
                <button class="close-modal" onclick="closeModal('addUserModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addUserForm">
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Role</label>
                        <select class="form-control" required>
                            <option value="tenant">Tenant</option>
                            <option value="owner">Property Owner</option>
                            <option value="service_provider">Service Provider</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Add User</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./js/config.js"></script>
    <script src="./js/api.js"></script>
    <script src="./js/auth.js"></script>
    
    <script>
        // Check if user has admin access
        document.addEventListener('DOMContentLoaded', function() {
            if (!authManager.requireAuth(['admin', 'super_admin'])) {
                return;
            }
            
            // Initialize dashboard
            initializeDashboard();
            loadDashboardData();
            setupEventListeners();
            initializeCharts();
        });

        let currentSection = 'overview';
        let dashboardData = {
            users: [],
            listings: [],
            orders: [],
            reports: [],
            stats: {}
        };

        function initializeDashboard() {
            const user = authManager.getCurrentUser();
            if (user) {
                document.getElementById('adminName').textContent = user.name || 'Admin';
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        }

        function showUserMenu() {
            // Implement user menu dropdown
            alert('User menu functionality would be implemented here');
        }

        function setupEventListeners() {
            // Menu item clicks
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    if (section) {
                        switchSection(section);
                    }
                });
            });

            // Search and filter inputs
            const searchInputs = ['userSearch', 'listingSearch', 'orderSearch', 'reportSearch'];
            searchInputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', debounce(handleSearch, 300));
                }
            });

            // Form submissions
            document.getElementById('notificationForm').addEventListener('submit', handleNotificationSubmit);
            document.getElementById('settingsForm').addEventListener('submit', handleSettingsSubmit);
        }

        function switchSection(sectionName) {
            // Update menu active state
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`[data-section="${sectionName}"]`).classList.add('active');

            // Hide all sections
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(`${sectionName}-section`).classList.add('active');

            // Update page title
            const titles = {
                overview: 'Dashboard Overview',
                users: 'User Management',
                listings: 'Property Listings',
                orders: 'Order Management',
                reports: 'Reports & Complaints',
                analytics: 'Analytics',
                notifications: 'Notifications',
                settings: 'Settings'
            };
            document.getElementById('pageTitle').textContent = titles[sectionName] || 'Dashboard';

            currentSection = sectionName;
            loadSectionData(sectionName);
        }

        async function loadDashboardData() {
            try {
                showLoadingState();

                // Simulate API calls - replace with actual API endpoints
                const [users, listings, orders, reports, stats] = await Promise.all([
                    loadUsers(),
                    loadListings(),
                    loadOrders(),
                    loadReports(),
                    loadStats()
                ]);

                dashboardData = { users, listings, orders, reports, stats };
                updateDashboardStats(stats);
                hideLoadingState();

            } catch (error) {
                console.error('Failed to load dashboard data:', error);
                showErrorMessage('Failed to load dashboard data');
            }
        }

        async function loadUsers() {
            // Simulate user data - replace with actual API call
            return [
                { id: 1, name: 'John Doe', email: 'john@example.com', role: 'tenant', status: 'active', joinedAt: '2024-01-15' },
                { id: 2, name: 'Jane Smith', email: 'jane@example.com', role: 'owner', status: 'active', joinedAt: '2024-01-20' },
                { id: 3, name: 'Bob Johnson', email: 'bob@example.com', role: 'tenant', status: 'pending', joinedAt: '2024-02-01' }
            ];
        }

        async function loadListings() {
            // Simulate listing data
            return [
                { id: 1, title: 'Cozy PG in Hyderabad', owner: 'Jane Smith', city: 'hyderabad', price: '₹8,000', status: 'verified' },
                { id: 2, title: 'Modern Room in Bangalore', owner: 'Mike Wilson', city: 'bangalore', price: '₹12,000', status: 'pending' }
            ];
        }

        async function loadOrders() {
            // Simulate order data
            return [
                { id: 'ORD001', customer: 'John Doe', type: 'food', amount: '₹250', status: 'delivered', date: '2024-02-15' },
                { id: 'ORD002', customer: 'Jane Smith', type: 'laundry', amount: '₹150', status: 'pending', date: '2024-02-16' }
            ];
        }

        async function loadReports() {
            // Simulate report data
            return [
                { id: 'RPT001', user: 'John Doe', category: 'maintenance', priority: 'high', status: 'open', date: '2024-02-14' },
                { id: 'RPT002', user: 'Jane Smith', category: 'billing', priority: 'medium', status: 'resolved', date: '2024-02-10' }
            ];
        }

        async function loadStats() {
            // Simulate stats data
            return {
                totalUsers: 2847,
                totalListings: 1234,
                totalOrders: 5631,
                totalRevenue: 245690,
                userGrowth: 12,
                listingGrowth: 8,
                orderGrowth: 15,
                revenueGrowth: 22
            };
        }

        function updateDashboardStats(stats) {
            document.getElementById('totalUsers').textContent = stats.totalUsers.toLocaleString();
            document.getElementById('totalListings').textContent = stats.totalListings.toLocaleString();
            document.getElementById('totalOrders').textContent = stats.totalOrders.toLocaleString();
            document.getElementById('totalRevenue').textContent = `₹${stats.totalRevenue.toLocaleString()}`;
        }

        function loadSectionData(sectionName) {
            switch(sectionName) {
                case 'users':
                    populateUsersTable();
                    break;
                case 'listings':
                    populateListingsTable();
                    break;
                case 'orders':
                    populateOrdersTable();
                    break;
                case 'reports':
                    populateReportsTable();
                    break;
                case 'notifications':
                    populateNotificationsTable();
                    break;
            }
        }

        function populateUsersTable() {
            const tbody = document.getElementById('usersTable');
            tbody.innerHTML = dashboardData.users.map(user => `
                <tr>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>${user.role}</td>
                    <td><span class="status-badge status-${user.status}">${user.status}</span></td>
                    <td>${user.joinedAt}</td>
                    <td>
                        <button class="btn btn-primary" onclick="editUser(${user.id})">Edit</button>
                        <button class="btn btn-danger" onclick="blockUser(${user.id})">Block</button>
                    </td>
                </tr>
            `).join('');
        }

        function populateListingsTable() {
            const tbody = document.getElementById('listingsTable');
            tbody.innerHTML = dashboardData.listings.map(listing => `
                <tr>
                    <td><input type="checkbox" value="${listing.id}"></td>
                    <td>${listing.title}</td>
                    <td>${listing.owner}</td>
                    <td>${listing.city}</td>
                    <td>${listing.price}</td>
                    <td><span class="status-badge status-${listing.status}">${listing.status}</span></td>
                    <td>
                        <button class="btn btn-success" onclick="verifyListing(${listing.id})">Verify</button>
                        <button class="btn btn-danger" onclick="rejectListing(${listing.id})">Reject</button>
                    </td>
                </tr>
            `).join('');
        }

        function populateOrdersTable() {
            const tbody = document.getElementById('ordersTable');
            tbody.innerHTML = dashboardData.orders.map(order => `
                <tr>
                    <td>${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${order.type}</td>
                    <td>${order.amount}</td>
                    <td><span class="status-badge status-${order.status}">${order.status}</span></td>
                    <td>${order.date}</td>
                    <td>
                        <button class="btn btn-primary" onclick="viewOrder('${order.id}')">View</button>
                        <button class="btn btn-success" onclick="updateOrderStatus('${order.id}', 'delivered')">Complete</button>
                    </td>
                </tr>
            `).join('');
        }

        function populateReportsTable() {
            const tbody = document.getElementById('reportsTable');
            tbody.innerHTML = dashboardData.reports.map(report => `
                <tr>
                    <td><input type="checkbox" value="${report.id}"></td>
                    <td>${report.id}</td>
                    <td>${report.user}</td>
                    <td>${report.category}</td>
                    <td>${report.priority}</td>
                    <td><span class="status-badge status-${report.status.replace('_', '-')}">${report.status}</span></td>
                    <td>${report.date}</td>
                    <td>
                        <button class="btn btn-primary" onclick="viewReport('${report.id}')">View</button>
                        <button class="btn btn-success" onclick="resolveReport('${report.id}')">Resolve</button>
                    </td>
                </tr>
            `).join('');
        }

        function populateNotificationsTable() {
            // Sample notification data
            const notifications = [
                { title: 'Maintenance Alert', type: 'warning', audience: 'all', sent: '2024-02-15', status: 'sent' },
                { title: 'New Feature Update', type: 'info', audience: 'all', sent: '2024-02-10', status: 'sent' }
            ];

            const tbody = document.getElementById('notificationsTable');
            tbody.innerHTML = notifications.map(notification => `
                <tr>
                    <td>${notification.title}</td>
                    <td>${notification.type}</td>
                    <td>${notification.audience}</td>
                    <td>${notification.sent}</td>
                    <td><span class="status-badge status-active">${notification.status}</span></td>
                    <td>
                        <button class="btn btn-primary" onclick="viewNotification('${notification.id}')">View</button>
                        <button class="btn btn-danger" onclick="deleteNotification('${notification.id}')">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function initializeCharts() {
            // User Growth Chart
            const userGrowthCtx = document.getElementById('userGrowthChart');
            if (userGrowthCtx) {
                new Chart(userGrowthCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'New Users',
                            data: [120, 190, 300, 500, 720, 890],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart');
            if (revenueCtx) {
                new Chart(revenueCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Revenue',
                            data: [12000, 19000, 30000, 50000, 72000, 89000],
                            backgroundColor: 'rgba(67, 233, 123, 0.8)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }
        }

        // Event handlers
        function showAddUserModal() {
            document.getElementById('addUserModal').classList.add('show');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function handleSearch(event) {
            const searchTerm = event.target.value.toLowerCase();
            const tableId = event.target.id.replace('Search', 'sTable');
            // Implement search functionality
            console.log(`Searching ${tableId} for: ${searchTerm}`);
        }

        function handleNotificationSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            console.log('Sending notification:', Object.fromEntries(formData));
            alert('Notification sent successfully!');
            e.target.reset();
        }

        function handleSettingsSubmit(e) {
            e.preventDefault();
            console.log('Saving settings...');
            alert('Settings saved successfully!');
        }

        // Utility functions
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function showLoadingState() {
            // Implement loading state
        }

        function hideLoadingState() {
            // Hide loading state
        }

        function showErrorMessage(message) {
            alert(message);
        }

        // Action functions
        function editUser(userId) {
            console.log('Edit user:', userId);
        }

        function blockUser(userId) {
            console.log('Block user:', userId);
        }

        function verifyListing(listingId) {
            console.log('Verify listing:', listingId);
        }

        function rejectListing(listingId) {
            console.log('Reject listing:', listingId);
        }

        function viewOrder(orderId) {
            console.log('View order:', orderId);
        }

        function updateOrderStatus(orderId, status) {
            console.log('Update order status:', orderId, status);
        }

        function viewReport(reportId) {
            console.log('View report:', reportId);
        }

        function resolveReport(reportId) {
            console.log('Resolve report:', reportId);
        }

        function logout() {
            authManager.logout();
        }

        // Mobile responsiveness
        window.addEventListener('resize', function() {
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('mobile-open');
            }
        });
    </script>
</body>
</html>
